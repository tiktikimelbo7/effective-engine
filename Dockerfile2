FROM alpine:3.16
RUN apk add \
    python3 py3-pip aria2 qbittorrent-nox libpq-dev libffi-dev wget \
    p7zip tar xz curl pv jq ffmpeg git unzip rtmpdump file-dev libmagic \
    zlib-dev zlib-static openssl-dev openssl-libs-static \
    brotli-dev brotli-static crypto++-dev crypto++-static c-ares-dev c-ares-static sqlite-dev \
    sqlite-static libsodium-dev libsodium-static curl-dev curl-static nghttp2-dev nghttp2-static
#RUN wget https://github.com/tonmoyislam250/fluffy-guide/releases/download/v6/pack.zip \
#    && unzip pack.zip && cd pack && apk add *\
RUN curl -L https://github.com/tonmoyislam250/drinkbeer12/releases/download/v1.3.3/megasdkrest-amd64 \
    -o /usr/local/bin/megasdkrest && chmod +x /usr/local/bin/megasdkrest
WORKDIR /usr/src/app
COPY ./pewdiepie.so /usr/src/binary
COPY race.py start.sh req.txt .
RUN mv /usr/bin/aria2c /usr/bin/mrbeast \
    && mv /usr/bin/qbittorrent-nox /usr/bin/pewdiepie \
    && mv /usr/bin/ffmpeg /usr/bin/mutahar
RUN pip3 install --no-cache-dir -r req.txt
